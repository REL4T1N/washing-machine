import re
from typing import Tuple

def validate_name_only(text: str) -> Tuple[bool, str, str]:
    """
    Валидирует имя
    Возвращает: (успех, имя, сообщение_об_ошибке)
    
    Правила:
    1. Имя должно быть от 2 до 50 символов
    2. Разрешены: буквы (рус/англ), цифры, скобки (), пробелы, дефисы, точки
    3. Должно содержать хотя бы одну букву

    Args:
        text: Строка, введенная пользователем.

    Returns:
        Tuple[bool, str, str]: (Успех, Очищенное имя, Сообщение об ошибке).
    """
    text = text.strip()
    
    # 1. Проверка на пустоту
    if not text:
        return False, "", "Имя не может быть пустым"
    
    # 2. Проверка длины
    if len(text) < 2:
        return False, "", "Имя должно быть минимум 2 символа"
    
    if len(text) > 50:
        return False, "", "Имя слишком длинное (максимум 50 символов)"
    
    # 3. Проверка допустимых символов
    # Разрешаем: буквы (рус/англ), цифры, пробелы, дефисы, точки
    name_pattern = r'^[A-Za-zА-Яа-яЁё0-9\s\-\.\(\)]+$'
    if not re.match(name_pattern, text):
        return False, "", "Имя содержит недопустимые символы. Используйте только буквы, цифры, скобки (), пробелы, дефисы"
    
    # 4. Проверка что имя содержит хотя бы одну букву
    if not re.search(r'[A-Za-zА-Яа-яЁё]', text):
        return False, "", "Имя должно содержать хотя бы одну букву"
    
    # 5. Проверка что имя не состоит только из пробелов/спецсимволов
    cleaned = re.sub(r'[\s\-\.\(\)]', '', text)
    if len(cleaned) == 0:
        return False, "", "Имя не может состоять только из специальных символов"
    
    # 6. Очистка лишних пробелов
    cleaned_name = ' '.join(text.split())
    
    return True, cleaned_name, ""

# Функция для быстрой проверки
def is_valid_name(name: str) -> bool:
    """Быстрая проверка валидности имени"""
    is_valid, _, _ = validate_name_only(name)
    return is_valid